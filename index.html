index.html
<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PRO Concursos</title>
<?php // wp_head(); ?>
<style>
  :root {
    --header-height: 55px;
    /* Paleta Azul/Dourado */
    --main-color: #1A5276;
    --light-highlight-bg: #EAF2F8;
    --accent-1: #D4AC0D;
    --accent-1-darker: #b3910b; /* Mantive o nome antigo, mas o valor foi usado no hover do botão do dropdown novo */
    --accent-2: #CA6F1E;
    --dark-bg: #154360;
    --subnav-bg: #282A35;
    --text-dark: #333;
    --text-light: #f8f9fa;
    --text-muted: #6c757d;
    --border-color: #ccc;
    --light-grey-bg: #f1f1f1;
    --header-bg: #ffffff;
    --header-border: #e7e7e7;
    --main-content-bg: #ffffff;
    --code-bg: #f1f1f1;
    --button-text-dark: #333;
    --footer-text-muted: #ccc;
    --footer-link-color: #ccc;
    --footer-link-hover: var(--accent-1);
    --footer-separator: #555;
    --footer-h4: #f1f1f1;
    /* Adicionado para compatibilidade com a regra de hover do botão do dropdown */
    --dark-blue-hover: #113a54; /* Exemplo, ajuste se necessário */
  }

  /* --- Estilos Base para Modo Escuro --- */
  body.dark-mode {
    --main-color: #6cb6ff; --light-highlight-bg: #2d333b; --accent-1: #e4c05c;
    --accent-1-darker: #cfae51; --accent-2: #d98234; --dark-bg: #0d1117;
    --subnav-bg: #22272e; --text-dark: #c9d1d9; --text-light: #f0f6fc;
    --text-muted: #8b949e; --border-color: #444c56; --light-grey-bg: #0d1117;
    --header-bg: #161b22; --header-border: #30363d; --main-content-bg: #161b22;
    --code-bg: #22272e; --button-text-dark: #161b22; --footer-text-muted: #8b949e;
    --footer-link-color: #8b949e; --footer-link-hover: var(--accent-1);
    --footer-separator: #30363d; --footer-h4: var(--text-light);
    --dark-blue-hover: #1a6fba; /* Exemplo modo escuro, ajuste se necessário */
  }

  /* Estilos Gerais */
  html { height: 100%; }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0;
    display: flex; flex-direction: column; min-height: 100vh;
    background-color: var(--light-grey-bg); color: var(--text-dark);
    padding-top: var(--header-height); box-sizing: border-box;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  /* --- Cabeçalho (Homepage Version) --- */
  .w3s-header {
    background-color: var(--header-bg); color: var(--text-dark); display: flex; align-items: center;
    padding: 0 20px; height: var(--header-height); width: 100%;
    box-sizing: border-box; position: fixed; top: 0; left: 0;
    z-index: 103; border-bottom: 1px solid var(--header-border); gap: 15px;
  }
  .w3s-logo-area { display: flex; align-items: center; flex-shrink: 0; }
  .w3s-logo-placeholder { width: 35px; height: 35px; margin-right: 8px; }
  .w3s-logo-placeholder text { font-size: 35px; fill: var(--main-color); font-weight: bold; font-family: sans-serif;}
  .w3s-logo-placeholder circle { fill: transparent; stroke: var(--main-color); stroke-width: 5; }
  .w3s-header-right-group { display: flex; align-items: center; margin-left: auto; gap: 12px; }
  .w3s-search-area { display: flex; align-items: center; max-width: 220px; }
  .w3s-search-area input[type="text"] { padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 25px 0 0 25px; font-size: 14px; width: 100%; border-right: none; height: 36px; box-sizing: border-box; background-color: var(--main-content-bg); color: var(--text-dark); }
  .w3s-search-area input[type="text"]:focus { outline: none; border-color: var(--main-color); }
  .w3s-search-area button { padding: 0 12px; height: 36px; box-sizing: border-box; background-color: var(--light-grey-bg); border: 1px solid var(--border-color); border-left: none; cursor: pointer; border-radius: 0 25px 25px 0; transition: background-color 0.2s; font-size: 16px; color: var(--text-muted); }
  .w3s-search-area button:hover { background-color: #ddd; }
  body.dark-mode .w3s-search-area button:hover { background-color: #2d333b; }
  .w3s-header-actions { display: flex; align-items: center; gap: 8px; flex-shrink: 0; position: relative; }
  .w3s-header-actions a, .w3s-header-actions button { color: var(--text-dark); text-decoration: none; font-size: 14px; display: flex; align-items: center; gap: 5px; transition: color 0.2s, background-color 0.2s; padding: 5px 6px; border-radius: 4px; background: none; border: none; cursor: pointer; }
  .w3s-header-actions a .icon, .w3s-header-actions button .icon { font-size: 1.1em; display: inline-block; width: 1em; height: 1em; line-height: 1em; text-align: center; color: #666; }
  body.dark-mode .w3s-header-actions a, body.dark-mode .w3s-header-actions button { color: var(--text-muted); }
  body.dark-mode .w3s-header-actions a .icon, body.dark-mode .w3s-header-actions button .icon { color: var(--text-muted); }
  .w3s-header-actions a[title="Assinaturas"] .icon { color: #9763f6; }
  body.dark-mode .w3s-header-actions a[title="Assinaturas"] .icon { color: #c8a1ff; }
  .w3s-header-actions a[title="Contato"] .icon { color: var(--main-color); }
  .w3s-header-actions a[title="Login"] .icon { color: #2a93fb; }
  body.dark-mode .w3s-header-actions a[title="Login"] .icon { color: #79c0ff; }
  .w3s-header-actions a:hover, .w3s-header-actions button:hover { color: var(--main-color); background-color: rgba(0,0,0,0.03); }
  body.dark-mode .w3s-header-actions a:hover, body.dark-mode .w3s-header-actions button:hover { background-color: rgba(255,255,255,0.05);}
  .w3s-header-actions a:hover .icon, .w3s-header-actions button:hover .icon { color: var(--main-color); }
  #theme-toggle .icon { font-size: 1.3em; }

  /* Dropdown de Login/Cadastro */
  .login-dropdown { display: none; position: absolute; top: calc(100% + 5px); right: 0; background-color: var(--header-bg); border: 1px solid var(--header-border); border-radius: 5px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); padding: 15px; width: 280px; z-index: 110; }
  .login-dropdown.active { display: block; }
  .login-dropdown label { display: block; margin-bottom: 5px; font-size: 0.9em; color: var(--text-muted); font-weight: 500; }
  .login-dropdown input[type="email"], .login-dropdown input[type="password"], .login-dropdown input[type="text"] { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid var(--border-color); border-radius: 4px; box-sizing: border-box; background-color: var(--main-content-bg); color: var(--text-dark); }
  .login-dropdown input[type="email"]:focus, .login-dropdown input[type="password"]:focus, .login-dropdown input[type="text"]:focus { outline: none; border-color: var(--main-color); }
  .login-dropdown button[type="submit"] { width: 100%; padding: 10px; background-color: var(--main-color); color: var(--text-light); border: none; border-radius: 4px; cursor: pointer; font-weight: bold; transition: background-color 0.2s; }
  body.dark-mode .login-dropdown button[type="submit"] { color: var(--button-text-dark); }
  .login-dropdown button[type="submit"]:hover { background-color: var(--accent-1-darker); } /* Usando a variável existente para hover dourado escuro */
  body.dark-mode .login-dropdown button[type="submit"]:hover { background-color: #8fceff; }
  .login-dropdown p { margin-top: 10px; font-size: 0.9em; text-align: center; }
  .login-dropdown p a { color: var(--main-color); text-decoration: none; font-weight: bold; }
  .login-dropdown p a:hover { text-decoration: underline; }

  /* --- Conteúdo da Homepage --- */
  main.homepage-main { flex-grow: 1; background-color: var(--main-content-bg); width: 100%; box-sizing: border-box; }
  .homepage-section { padding: 40px 20px; max-width: 1200px; margin: 0 auto; }
  .homepage-section h2 { text-align: center; font-size: 2.2em; color: var(--main-color); margin-top: 0; margin-bottom: 40px; /* Mais espaço */ }

  /* Banner Assine Já */
  .hero-banner { background-color: var(--main-color); color: var(--text-light); padding: 60px 20px; text-align: center; }
  .hero-banner h1 { font-size: 2.8em; margin-top: 0; margin-bottom: 15px; font-weight: 600; }
  .hero-banner p { font-size: 1.1em; margin-bottom: 30px; max-width: 600px; margin-left: auto; margin-right: auto; opacity: 0.9; }
  .cta-button { display: inline-block; padding: 12px 30px; background-color: var(--accent-1); color: var(--button-text-dark); text-decoration: none; font-size: 1.1em; font-weight: bold; border-radius: 5px; transition: background-color 0.3s, transform 0.2s; }
  .cta-button:hover { background-color: var(--accent-1-darker); transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
  body.dark-mode .cta-button { color: var(--button-text-dark);}

  /* Carrossel Cursos (Simulado com Flex + Scroll) */
    .carousel-container {
        overflow-x: auto; /* Permite scroll horizontal */
        padding-bottom: 20px; /* Espaço para barra de scroll não cobrir sombra */
        margin-left: -20px; /* Compensa padding da section */
        margin-right: -20px; /* Compensa padding da section */
        padding-left: 20px; /* Padding inicial */
        padding-right: 20px; /* Padding final */
    }
    /* Estilo para barra de scroll (opcional) */
    .carousel-container::-webkit-scrollbar { height: 8px; }
    .carousel-container::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px;}
    body.dark-mode .carousel-container::-webkit-scrollbar-track { background: #2d333b; }
    .carousel-container::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px;}
    body.dark-mode .carousel-container::-webkit-scrollbar-thumb { background: #555; }
    .carousel-container::-webkit-scrollbar-thumb:hover { background: #aaa; }
    body.dark-mode .carousel-container::-webkit-scrollbar-thumb:hover { background: #777; }

  .carousel-track {
      display: inline-flex; /* Faz os itens ficarem em linha */
      gap: 25px;
  }
  .course-card {
      background-color: var(--header-bg); border: 1px solid var(--header-border);
      border-radius: 8px; padding: 20px;
      width: 300px; /* Largura fixa para cada card */
      flex-shrink: 0; /* Impede que encolham */
      box-shadow: 0 2px 5px rgba(0,0,0,0.08); display: flex; flex-direction: column;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  .course-card:hover { transform: translateY(-5px); box-shadow: 0 6px 15px rgba(0,0,0,0.1); }
  .course-card .icon-placeholder { font-size: 3em; text-align: center; margin-bottom: 15px; color: var(--main-color); }
  .course-card h3 { margin-top: 0; margin-bottom: 10px; color: var(--main-color); font-size: 1.3em; }
  .course-card p { font-size: 0.95em; line-height: 1.6; color: var(--text-muted); flex-grow: 1; margin-bottom: 20px; }
  body.dark-mode .course-card p { color: var(--text-muted); }
  .course-card a.w3-btn { margin-top: auto; text-align: center; display: block; background-color: var(--accent-1); color: var(--button-text-dark); font-weight: bold; text-decoration: none; border-radius: 5px; padding: 10px 15px; }
  .course-card a.w3-btn:hover { background-color: var(--accent-1-darker) !important; }

  /*
  */
  .news-section { background-color: var(--light-highlight-bg); border-top: 1px solid var(--header-border); border-bottom: 1px solid var(--header-border); }
  .news-list { list-style: none; padding: 0; margin: 0 0 30px 0; }
  .news-item { border-bottom: 1px dashed var(--border-color); padding: 15px 0; }
  .news-item:last-child { border-bottom: none; }
  .news-item h4 { margin: 0 0 5px 0; }
  .news-item h4 a { text-decoration: none; color: var(--main-color); font-size: 1.1em; font-weight: 600; }
  .news-item h4 a:hover { text-decoration: underline; }
  .news-item .news-meta { font-size: 0.85em; color: var(--text-muted); margin-bottom: 8px; display: block; }
  .news-item p { margin: 0; font-size: 0.95em; color: var(--text-dark); }
  .view-all-news { display: block; text-align: center; margin-top: 20px; }
    /* Botão Ver todas notícias */
  .view-all-news a.w3-btn { display: inline-block; background-color: var(--main-color); color: var(--text-light); padding: 10px 15px; text-decoration: none; border-radius: 5px; font-weight: bold; /* Adicionado para consistência */ }
  body.dark-mode .view-all-news a.w3-btn { color: var(--button-text-dark); }
  .view-all-news a.w3-btn:hover { background-color: var(--dark-bg) !important; color: var(--text-light) !important; }
  body.dark-mode .view-all-news a.w3-btn:hover { background-color: #8fceff !important; color: var(--button-text-dark) !important;}

  /* Destaque Logo */
  .logo-highlight-section {
      text-align: center;
      padding: 30px 20px;
      background-color: var(--light-grey-bg); /* Ou outra cor sutil */
      border-top: 1px solid var(--header-border);
        border-bottom: 1px solid var(--header-border);
  }
  .logo-highlight-section svg {
      width: 100px; /* Tamanho maior */
      height: 100px;
  }

  /* Como Funciona? */
  .steps-grid { /* Usando flex para alinhar horizontalmente */
      display: flex;
      flex-wrap: wrap; /* Quebra em telas menores */
      gap: 25px;
      justify-content: center;
  }
  .step-card { /* Pode reutilizar .course-card ou ter estilo próprio */
      background-color: var(--header-bg); border: 1px solid var(--header-border);
      border-radius: 8px; padding: 20px;
      width: calc(33.333% - 30px); min-width: 280px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.08); display: flex; flex-direction: column;
      text-align: center;
  }
  .step-card .icon-placeholder { font-size: 2.5em; margin-bottom: 10px; color: var(--main-color); font-weight: bold;}
  .step-card h3 { margin-top: 0; margin-bottom: 10px; color: var(--main-color); font-size: 1.2em; }
  .step-card p { font-size: 0.95em; line-height: 1.6; color: var(--text-muted); flex-grow: 1; }
    body.dark-mode .step-card p { color: var(--text-muted); }

  /* --- Rodapé --- */
  .footer { background-color: var(--dark-bg); color: var(--footer-text-muted); padding: 30px 20px; text-align: left; width: 100%; box-sizing: border-box; z-index: 101; flex-shrink: 0; }
  .footer-content { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-around; align-items: flex-start; flex-wrap: wrap; gap: 30px; padding-bottom: 20px; border-bottom: 1px solid var(--footer-separator); margin-bottom: 15px; }
  .footer-section { min-width: 200px; flex-grow: 1; }
  .footer h4 { color: var(--footer-h4); margin-top: 0; margin-bottom: 15px; border-bottom: 1px solid var(--footer-separator); padding-bottom: 8px; font-size: 1.1em; }
  .footer ul { list-style: none; padding: 0; margin: 0; }
  .footer ul li { margin-bottom: 8px; }
  .footer ul li a, .footer-section p a { color: var(--footer-link-color); text-decoration: none; font-size: 0.9em; transition: color 0.3s; }
  .footer ul li a:hover, .footer-section p a:hover { color: var(--footer-link-hover); }
  .footer-section p { color: var(--footer-link-color); font-size: 0.9em; margin: 0 0 8px 0; line-height: 1.5; }
  .footer-copyright { text-align: center; font-size: 0.85em; color: #a8c0d1; width: 100%; padding-top: 15px; }
  body.dark-mode .footer-copyright { color: var(--text-muted); }
  .footer-copyright a { color: var(--footer-link-color); }
  .footer-copyright a:hover { color: var(--footer-link-hover); }

  /* --- Responsividade Homepage --- */
  @media screen and (max-width: 1100px) {
      .w3s-header-actions a[title="Contato"] { display: none; }
      .w3s-search-area { max-width: 200px; }
      .w3s-header { gap: 15px; }
  }
    @media screen and (max-width: 992px) {
      /* .w3s-nav-main já escondido */
      .w3s-search-area { max-width: 180px; }
      .w3s-header-right-group { gap: 10px; }
      .w3s-header-actions { gap: 8px; }
      .w3s-header-actions a span.link-text { display: none; } /* Esconde texto dos links no header */
      .w3s-header { gap: 10px; padding: 0 10px; }
      .course-card, .step-card { width: calc(50% - 30px); } /* 2 colunas */
    }
    @media screen and (max-width: 768px) {
      .w3s-header { height: 50px; }
      body { padding-top: 50px; } /* Ajusta padding para novo header */

      .hero-banner h1 { font-size: 2em;}
      .hero-banner p { font-size: 1em;}
      .homepage-section h2 { font-size: 1.8em;}
      .course-card, .step-card { width: calc(100% - 20px); min-width: unset; } /* 1 coluna, remove min-width */
      .steps-grid { flex-direction: column; align-items: center;} /* Empilha Como Funciona */

      .footer-content { flex-direction: column; align-items: center; text-align: center; }
      .footer-section { min-width: unset; width: 80%; margin-bottom: 15px;}
    }
    @media screen and (max-width: 480px) {
        .w3s-search-area { display: none; }
        .w3s-header-right-group { margin-left: auto; }
        .hero-banner { padding: 40px 15px;}
        .hero-banner h1 { font-size: 1.6em;}
        .login-dropdown { /* Ajusta dropdown em telas pequenas */
            width: 90%;
            right: 5%;
            left: 5%;
        }
    }

</style>
</head>
<body <?php // body_class(); ?>>

<header class="w3s-header" id="mainHeader">
    <div class="w3s-logo-area">
      <a href="#" title="Página Inicial">
        <svg class="w3s-logo-placeholder" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <circle cx="50" cy="50" r="48"/>
            <text x="50%" y="55%" dominant-baseline="middle" text-anchor="middle">NVP</text>
        </svg>
      </a>
    </div>
    <div class="w3s-header-right-group">
        <div class="w3s-search-area">
            <input type="text" placeholder="Buscar..." aria-label="Campo de busca">
            <button type="submit" aria-label="Buscar">🔍</button>
        </div>
        <div class="w3s-header-actions">
            <button id="theme-toggle" title="Alternar Tema Claro/Escuro">
                <span class="icon theme-icon-light">☀️</span>
                <span class="icon theme-icon-dark" style="display: none;">🌙</span>
            </button>
            <a href="#" title="Assinaturas"><span class="icon">➕</span> <span class="link-text">Assinaturas</span></a>
            <a href="#" title="Contato"><span class="icon">👨‍🏫</span> <span class="link-text">Contato</span></a>
            <div style="position: relative;">
                <button id="login-btn" title="Login"><span class="icon">👤</span> <span class="link-text">Login</span></button>
                <div id="login-dropdown" class="login-dropdown">
                    <form id="login-form">
                        <label for="login-email">Email:</label>
                        <input type="email" id="login-email" name="email" required>
                        <label for="login-password">Senha:</label>
                        <input type="password" id="login-password" name="password" required>
                        <button type="submit">Entrar</button>
                        <p>Não tem conta? <a href="https://nvp-concursos.firebaseapp.com/cadastro.html" id="show-signup">Cadastre-se</a></p>
                    </form>
                </div>
                <div id="signup-dropdown" class="login-dropdown" style="display: none;">
                     <form id="signup-form">
                         <label for="signup-email">Email:</label>
                         <input type="email" id="signup-email" name="email" required>
                         <label for="signup-password">Senha:</label>
                         <input type="password" id="signup-password" name="password" required>
                         <label for="confirm-password">Confirmar Senha:</label>
                         <input type="password" id="confirm-password" name="confirmPassword" required>
                         <button type="submit">Cadastrar</button>
                         <p>Já tem conta? <a href="#" id="show-login">Faça Login</a></p>
                     </form>
                </div>
            </div>
        </div>
        </div>
</header>
<main class="homepage-main">

    <section class="hero-banner">
        <h1>Prepare-se para o Sucesso no seu Concurso!</h1>
        <p>Plataforma completa com cursos, questões comentadas e simulados atualizados para você conquistar a sua vaga.</p>
        <a href="https://nvp-concursos.firebaseapp.com/cadastro.html" class="cta-button">ASSINE JÁ</a>
    </section>

    <section class="homepage-section featured-courses">
        <h2>Nossos Principais Cursos</h2>
        <div class="carousel-container">
            <div class="carousel-track">
                <div class="course-card">
                    <div class="icon-placeholder">🏛️</div>
                    <h3>Direito Constitucional</h3>
                    <p>Domine os fundamentos e os tópicos mais cobrados em Direito Constitucional.</p>
                    <a href="#" class="w3-btn">Saiba Mais</a>
                </div>
                <div class="course-card">
                     <div class="icon-placeholder">✍️</div>
                    <h3>Português para Concursos</h3>
                    <p>Gramática, interpretação e redação com foco total nas principais bancas.</p>
                    <a href="#" class="w3-btn">Saiba Mais</a>
                </div>
                <div class="course-card">
                     <div class="icon-placeholder">🏢</div>
                    <h3>Direito Administrativo</h3>
                    <p>Entenda licitações, atos administrativos, agentes públicos e muito mais.</p>
                    <a href="#" class="w3-btn">Saiba Mais</a>
                </div>
                 <div class="course-card">
                     <div class="icon-placeholder">💻</div>
                    <h3>Informática Essencial</h3>
                    <p>Hardware, software, redes e segurança da informação para concursos.</p>
                    <a href="#" class="w3-btn">Saiba Mais</a>
                </div>
                 <div class="course-card">
                     <div class="icon-placeholder">🧠</div>
                    <h3>Raciocínio Lógico</h3>
                    <p>Desenvolva seu raciocínio lógico-matemático para gabaritar as provas.</p>
                    <a href="#" class="w3-btn">Saiba Mais</a>
                </div>
              </div>
        </div>
    </section>

    <section class="homepage-section news-section">
        <h2>Últimas Notícias de Concursos</h2>
        <ul class="news-list">
            <li class="news-item">
                <h4><a href="#">Edital Publicado: Concurso Banco Central 2025</a></h4>
                <span class="news-meta">Publicado em: 25/04/2025</span>
                <p>Saiu o edital para o concurso do BACEN com vagas para Analista e Técnico...</p>
            </li>
            <li class="news-item">
                <h4><a href="#">Prefeitura de Lages/SC Anuncia Novo Concurso</a></h4>
                <span class="news-meta">Publicado em: 23/04/2025</span>
                <p>Previsto para o segundo semestre, com vagas para área da educação e administrativa...</p>
            </li>
            <li class="news-item">
                <h4><a href="#">INSS: Previsão de Novo Edital para Técnico</a></h4>
                <span class="news-meta">Publicado em: 21/04/2025</span>
                <p>Órgão solicita autorização para novo concurso visando suprir déficit de servidores...</p>
            </li>
        </ul>
        <div class="view-all-news">
             <a href="#" class="w3-btn">Ver Todas as Notícias</a>
        </div>
     </section>

     <section class="homepage-section how-it-works">
         <h2>Como Funciona?</h2>
           <div class="steps-grid"> <div class="step-card"> <div class="icon-placeholder">1️⃣</div>
                <h3>Cadastre-se</h3>
                <p>Crie sua conta ou escolha um plano de assinatura ideal para você.</p>
            </div>
              <div class="step-card">
                <div class="icon-placeholder">2️⃣</div>
                <h3>Escolha seu Foco</h3>
                <p>Navegue pelos cursos e selecione as matérias ou carreiras desejadas.</p>
            </div>
              <div class="step-card">
                <div class="icon-placeholder">3️⃣</div>
                <h3>Estude e Pratique</h3>
                <p>Acesse os materiais, resolva questões e faça simulados para fixar.</p>
            </div>
        </div>
     </section> </main>
<footer class="footer">
     <div class="footer-copyright">
        <span>&copy; <?php echo date("Y"); ?> PRO Concursos. Todos os direitos reservados.</span>
    </div>
</footer>
<?php // wp_footer(); ?>

<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

<script>
        // --- Carrega o Cabeçalho Dinamicamente ---
        fetch('headerindex.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('header-placeholder').innerHTML = data;
                initializeHeaderEvents();
            })
            .catch(error => console.error('Erro ao carregar o header:', error));

        // --- Configuração Firebase ---
        const firebaseConfig = {
            apiKey: "AIzaSyD103GQaVxUfLuH-ySnCxu7rl0xE8noaJM",
            authDomain: "nvp-concursos.firebaseapp.com",
            projectId: "nvp-concursos",
            storageBucket: "nvp-concursos.firebasestorage.app",
            messagingSenderId: "397960760271",
            appId: "1:397960760271:web:1550ff01910ae927d860ba"
        };
        let db;
        let auth;
        try {
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
            auth = firebase.auth();
            db = firebase.firestore();
            console.log("Firebase inicializado com sucesso (Personalizar).");
        } catch (e) {
            console.error("Firebase initialization error:", e);
            alert("Erro crítico ao inicializar a plataforma. A personalização pode não funcionar.");
            const container = document.getElementById('course-list-container');
            const confirmButton = document.getElementById('confirm-personalization-btn');
            if (container) container.innerHTML = '<h2 style="color:var(--error-color)">Erro de Inicialização</h2><p>Não foi possível conectar ao Firebase. Verifique as credenciais e o console (F12).</p>';
            if (confirmButton) confirmButton.disabled = true;
        }

        // --- Função para Inicializar Eventos do Header ---
        function initializeHeaderEvents() {
            const sidebarToggleBtn = document.getElementById('sidebarToggleBtn');
            const colorPickerBtn = document.getElementById('color-picker-btn');
            const logoutBtn = document.getElementById('logout-btn');
            const topNav = document.getElementById('topNav');
            const megaMenuContainer = document.getElementById('megaMenuContainer');
            const themeToggleBtn = document.getElementById('theme-toggle');
            const sunIcon = themeToggleBtn ? themeToggleBtn.querySelector('.theme-icon-light') : null;
            const moonIcon = themeToggleBtn ? themeToggleBtn.querySelector('.theme-icon-dark') : null;

            // --- Sidebar Toggle (Não necessário nesta página, mas mantido para consistência) ---
            if (sidebarToggleBtn) {
                sidebarToggleBtn.addEventListener('click', toggleSidebar);
            }

            // --- Tema Claro/Escuro ---
            if (themeToggleBtn) {
                const savedTheme = localStorage.getItem('theme');
                const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
                let currentTheme = savedTheme || (prefersDarkScheme.matches ? 'dark' : 'light');
                applyTheme(currentTheme);

                themeToggleBtn.addEventListener('click', () => {
                    let newTheme = document.body.classList.contains('dark-mode') ? 'light' : 'dark';
                    applyTheme(newTheme);
                });

                window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                    if (!localStorage.getItem('theme')) {
                        applyTheme(e.matches ? 'dark' : 'light');
                    }
                });
            }

            // --- Mudar Cor de Fundo ---
            if (colorPickerBtn) {
                colorPickerBtn.addEventListener('click', () => {
                    const colorInput = document.createElement('input');
                    colorInput.type = 'color';
                    const mainContent = document.querySelector('main');
                    const currentMainBg = mainContent.style.backgroundColor;
                    const defaultColor = getComputedStyle(mainContent).getPropertyValue('--main-content-bg').trim() || '#ffffff';
                    colorInput.value = currentMainBg ? rgbToHex(currentMainBg) : defaultColor;

                    colorInput.addEventListener('input', () => {
                        const color = colorInput.value;
                        mainContent.style.backgroundColor = color;
                        localStorage.setItem('userMainBgColor', color);
                    });
                    colorInput.click();
                });
            }

            // --- Logout ---
            if (logoutBtn) {
                logoutBtn.addEventListener('click', () => {
                    auth.signOut().then(() => {
                        window.location.href = 'index.html';
                    }).catch(error => {
                        console.error('Erro logout:', error);
                        alert('Erro ao sair: ' + error.message);
                    });
                });
            }

            // --- Mega Menu Logic ---
            const megaMenuButtons = topNav ? topNav.querySelectorAll('button.nav-button') : [];
            const allMegaPanels = megaMenuContainer ? megaMenuContainer.querySelectorAll('.mega-menu-panel') : [];
            megaMenuButtons.forEach(button => {
                button.addEventListener('click', (event) => {
                    event.stopPropagation();
                    const targetId = button.getAttribute('data-target');
                    const targetPanel = document.getElementById(targetId);
                    if (!targetPanel) return;
                    const isAlreadyActive = targetPanel.classList.contains('active');
                    closeAllMegaMenus(targetId);
                    if (!isAlreadyActive) {
                        targetPanel.classList.add('active');
                        button.classList.add('active');
                    }
                });
            });

            document.addEventListener('click', (event) => {
                const clickedInsideMenu = megaMenuContainer && megaMenuContainer.contains(event.target);
                const clickedInsideNav = topNav && topNav.contains(event.target);
                if (!clickedInsideMenu && !clickedInsideNav) {
                    closeAllMegaMenus();
                }
            });

            function closeAllMegaMenus(excludePanelId = null) {
                allMegaPanels.forEach(panel => {
                    if (panel.id !== excludePanelId) {
                        panel.classList.remove('active');
                    }
                });
                megaMenuButtons.forEach(btn => {
                    if (btn.getAttribute('data-target') !== excludePanelId) {
                        btn.classList.remove('active');
                    }
                });
            }
        }

        function applyTheme(theme) {
            const sunIcon = document.querySelector('.theme-icon-light');
            const moonIcon = document.querySelector('.theme-icon-dark');
            document.body.classList.toggle('dark-mode', theme === 'dark');
            if (sunIcon && moonIcon) {
                sunIcon.style.display = theme === 'dark' ? 'none' : 'inline';
                moonIcon.style.display = theme === 'dark' ? 'inline' : 'none';
            }
            localStorage.setItem('theme', theme);
        }

        function rgbToHex(rgb) {
            if (!rgb || rgb === '') return '#ffffff';
            const rgbMatch = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
            if (!rgbMatch) return rgb;
            const r = parseInt(rgbMatch[1]);
            const g = parseInt(rgbMatch[2]);
            const b = parseInt(rgbMatch[3]);
            return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase();
        }
    // --- Configuração e Inicialização Firebase ---
     const firebaseConfig = {
        apiKey: "AIzaSyD103GQaVxUfLuH-ySnCxu7rl0xE8noaJM", // SUBSTITUA POR SEUS VALORES REAIS
        authDomain: "nvp-concursos.firebaseapp.com",
        projectId: "nvp-concursos",
        storageBucket: "nvp-concursos.firebasestorage.app", // Verifique terminação
        messagingSenderId: "397960760271",
        appId: "1:397960760271:web:1550ff01910ae927d860ba"
     };
     let auth;
     let db;
    try {
        firebase.initializeApp(firebaseConfig);
        auth = firebase.auth(); // Define auth aqui
        db = firebase.firestore(); // Define db aqui
        console.log("Firebase inicializado e serviços acessados.");
    } catch (e) {
         console.error("Erro CRÍTICO na inicialização do Firebase:", e);
         alert("Falha grave ao inicializar o sistema. Verifique o console.");
         // Talvez desabilitar funcionalidades que dependem do Firebase
    }
    // --- Fim Configuração Firebase ---


    // --- Executa o restante do JS após o DOM carregar ---
    document.addEventListener('DOMContentLoaded', () => {

        // --- Bloco Dark Mode ---
        const themeToggleBtn = document.getElementById('theme-toggle');
        const bodyElement = document.body;
        const sunIcon = themeToggleBtn?.querySelector('.theme-icon-light');
        const moonIcon = themeToggleBtn?.querySelector('.theme-icon-dark');

        function applyTheme(theme) { if (theme === 'dark') { bodyElement.classList.add('dark-mode'); if (sunIcon) sunIcon.style.display = 'none'; if (moonIcon) moonIcon.style.display = 'inline'; } else { bodyElement.classList.remove('dark-mode'); if (sunIcon) sunIcon.style.display = 'inline'; if (moonIcon) moonIcon.style.display = 'none'; } }
        const savedTheme = localStorage.getItem('theme');
        const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
        let currentTheme = 'light';
        if (savedTheme) { currentTheme = savedTheme; } else if (prefersDarkScheme.matches) { currentTheme = 'dark'; }
        applyTheme(currentTheme);

        if (themeToggleBtn) { themeToggleBtn.addEventListener('click', () => { let newTheme = bodyElement.classList.contains('dark-mode') ? 'light' : 'dark'; applyTheme(newTheme); localStorage.setItem('theme', newTheme); }); }
        prefersDarkScheme.addEventListener('change', (e) => { if (!localStorage.getItem('theme')) { applyTheme(e.matches ? 'dark' : 'light'); } });
        // --- Fim Bloco Dark Mode ---


        // --- Lógica Dropdown Login ---
        const loginBtn = document.getElementById('login-btn');
        const loginDropdown = document.getElementById('login-dropdown');
        // Não precisamos mais da lógica do signup dropdown aqui

        if (loginBtn && loginDropdown) {
             console.log("Setting up index.html login dropdown listener..."); // Log para depuração
            loginBtn.addEventListener('click', function(event) {
                event.stopPropagation();
                 console.log("Login button clicked!"); // Log para depuração
                // Simplesmente alterna a classe 'active'
                loginDropdown.classList.toggle('active');
                 // Ajusta display baseado na classe (melhor que style inline)
                 loginDropdown.style.display = loginDropdown.classList.contains('active') ? 'block' : 'none';
            });

            // Fecha se clicar fora
            document.addEventListener('click', function(event) {
                if (!loginDropdown.contains(event.target) && !loginBtn.contains(event.target)) {
                    if (loginDropdown.classList.contains('active')) {
                         loginDropdown.classList.remove('active');
                         loginDropdown.style.display = 'none';
                    }
                }
            });

            // Não fecha se clicar dentro
            loginDropdown.addEventListener('click', function(event) {
                event.stopPropagation();
            });
        } else {
            console.error("Botão de Login (#login-btn) ou Dropdown (#login-dropdown) não encontrado no HTML.");
        }
        // --- Fim Lógica Dropdown Login ---


        // --- Lógica Formulário de Login ---
        const loginForm = document.getElementById('login-form');

        if (loginForm && auth && db) { // Verifica se form, auth e db estão ok
            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const emailInput = document.getElementById('login-email');
                const passwordInput = document.getElementById('login-password');
                const email = emailInput ? emailInput.value : null;
                const password = passwordInput ? passwordInput.value : null;
                const loginButton = loginForm.querySelector('button[type="submit"]');

                if (!email || !password) { alert('Por favor, preencha email e senha.'); return; }

                loginButton.disabled = true;
                loginButton.textContent = 'Entrando...';

                auth.signInWithEmailAndPassword(email, password)
                    .then(userCredential => db.collection('users').doc(userCredential.user.uid).get())
                    .then(doc => {
                        // Lógica de redirecionamento
                        if (doc.exists && doc.data().role === 'admin') { window.location.href = '/admin/dashboard.html'; }
                        else if (doc.exists && doc.data().hasPersonalized === true) { window.location.href = 'saladeestudos.html'; }
                        else { window.location.href = 'personalizar.html'; } // Inclui caso doc não exista (novo usuário)
                    })
                    .catch(error => {
                        console.error("Erro no login ou busca Firestore:", error);
                        let friendlyMessage = 'Erro no login. Verifique suas credenciais.';
                        if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') { friendlyMessage = 'Email ou senha inválidos.'; }
                        else if (error.code === 'auth/invalid-email') { friendlyMessage = 'Formato de email inválido.'; }
                        alert(friendlyMessage);
                        loginButton.disabled = false;
                        loginButton.textContent = 'Entrar';
                    });
            });
        } else if (loginForm) {
            console.warn("Formulário de login encontrado, mas serviços Firebase (auth/db) não estão prontos.");
            // Desabilitar o botão do formulário se o Firebase falhou
            const loginButton = loginForm.querySelector('button[type="submit"]');
             if(loginButton) {
                loginButton.disabled = true;
                loginButton.textContent = 'Erro Init';
                loginButton.style.backgroundColor = 'grey';
            }
        }
        // --- Fim Lógica Formulário de Login ---


        // --- Ano no Rodapé ---
        const yearSpan = document.getElementById('current-year');
        if(yearSpan) yearSpan.textContent = new Date().getFullYear();
        // --- Fim Ano no Rodapé ---

    }); // --- Fim do DOMContentLoaded listener ---

</script>

</body>
</html>